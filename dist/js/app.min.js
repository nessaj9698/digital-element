class Validator{constructor(){this.errorClass="error"}validateForm(e){const t=e.querySelectorAll(".form__input");let r=!0;return t.forEach((e=>{this.validateField(e)||(r=!1)})),r}validateField(e){if("email"===e.type){if(!this.validateEmail(e.value)||!e.value.trim())return e.classList.add(this.errorClass),this.showErrorTooltip(e,"Please enter a valid email address"),!1}else{if(!e.value.trim())return e.classList.add(this.errorClass),this.showErrorTooltip(e,"This field is required"),!1;e.classList.remove(this.errorClass)}return!0}validateEmail(e){return/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/.test(e)}showErrorTooltip(e,t){const r=e.parentNode.querySelector(".tooltip-wrapper");r.innerHTML=t,e.parentNode.appendChild(r),setTimeout((()=>{r.innerHTML=""}),3e3)}}class Popup{constructor(){this.formWrapper=document.querySelector(".form-wrapper"),this.popupForm=document.querySelector(".popup-form"),this.closeButton=document.querySelector(".popup-form__close-btn"),this.openButton=document.querySelector(".footer__btn"),this.openButton.addEventListener("click",(()=>this.openPopup())),this.closeButton.addEventListener("click",(()=>this.closePopup())),this.formWrapper.addEventListener("click",(e=>{e.target===this.formWrapper&&this.closePopup()})),this.popupForm.addEventListener("submit",(e=>this.onSubmit(e)))}openPopup(){this.formWrapper.classList.add("popup-active"),document.body.classList.add("modal-open")}closePopup(){this.formWrapper.classList.remove("popup-active"),document.body.classList.remove("modal-open")}onSubmit(e){e.preventDefault();(new Validator).validateForm(this.popupForm)&&(this.popupForm.innerHTML='<p class="form__success">Your message successfully sent</p>')}}const popup=new Popup;